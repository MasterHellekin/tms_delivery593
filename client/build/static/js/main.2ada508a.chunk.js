(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{120:function(e,a,t){},121:function(e,a,t){},122:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(21),c=t.n(l),o=t(10),s=t(14),i=t(9),m=t(7),u=t.n(m),d=t(13),p=t(11),E=t.n(p),v=t(124),g=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){var r=Object(v.a)();n({type:"SET_ALERT",payload:{msg:e,alertType:a,id:r}}),setTimeout((function(){return n({type:"REMOVE_ALERT",payload:r})}),t)}},f=function(e){e?E.a.defaults.headers.common["x-auth-token"]=e:delete E.a.defaults.headers.common["x-auth-token"]},b=function(){return function(){var e=Object(d.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&f(localStorage.token),e.prev=1,e.next=4,E.a.get("/api/auth/user");case 4:t=e.sent,a({type:"USER_LOADED",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}()},h=function(){return function(){var e=Object(d.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&f(localStorage.token),e.prev=1,e.next=4,E.a.get("/api/auth/driver");case 4:t=e.sent,a({type:"DRIVER_LOADED",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}()},y=Object(i.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){e({type:"LOGOUT"})}}})((function(e){var a=e.auth,t=a.isAuthenticated,l=a.loading,c=a.role,s=e.logout,i=r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"!#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Conductor"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},r.a.createElement(o.b,{className:"dropdown-item",to:"/user/register-driver"},"Nuevo conductor"),r.a.createElement(o.b,{className:"dropdown-item",to:"/user/drivers"},"Mostrar conductores"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"!#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Veh\xedculos"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},r.a.createElement(o.b,{className:"dropdown-item",to:"/user/add-vehicle"},"Nuevo veh\xedculo"),r.a.createElement(o.b,{className:"dropdown-item",to:"/user/vehicles"},"Mostrar veh\xedculos"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"!#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Clientes"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},r.a.createElement(o.b,{className:"dropdown-item",to:"/user/add-client"},"Nuevo cliente"),r.a.createElement(o.b,{className:"dropdown-item",to:"/user/clients"},"Mostrar clientes"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"!#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Proveedores"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},r.a.createElement(o.b,{className:"dropdown-item",to:"/user/add-provider"},"Nuevo proveedor"),r.a.createElement(o.b,{className:"dropdown-item",to:"/user/providers"},"Mostrar proveedores"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"!#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"PIA"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},r.a.createElement(o.b,{className:"dropdown-item",to:"/user/add-pia"},"Nueva PIA"),r.a.createElement(o.b,{className:"dropdown-item",to:"/user/pias"},"Mostrar PIAs"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"!#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Usuario"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},r.a.createElement(o.b,{className:"dropdown-item",to:"/user/dashboard"},"Dashboard"),r.a.createElement(o.b,{onClick:s,to:"/",className:"dropdown-item"},"Salir")))),m=r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/driver/pias",className:"nav-link"},"Mostrar mis entregas")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{onClick:s,to:"/",className:"nav-link"},"Salir"))),u=r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/user/login",className:"nav-link"},"Gerente")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/driver/login",className:"nav-link"},"Conductor")));return r.a.createElement("header",null,r.a.createElement("nav",{className:"navbar navbar-expand-sm sticky-top navbar-dark bg-dark",id:"main-nav"},r.a.createElement("div",{className:"container"},r.a.createElement(o.b,{to:"/",className:"navbar-brand"},r.a.createElement("img",{src:"/img/delivery593logo.png",width:"50",height:"50",alt:""}),r.a.createElement("strong",{className:"text-secondary"},"Delivery 593")),r.a.createElement("button",{className:"navbar-toggler","data-toggle":"collapse","data-target":"#navbarCollapse"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarCollapse"},!l&&r.a.createElement(n.Fragment,null,t?"user"===c?i:m:u)))))})),N=t(15),O=t(1),j=t(16),x=function(){var e=Object(n.useState)({numpia:""}),a=Object(j.a)(e,2),t=a[0],l=a[1],c=t.numpia;return r.a.createElement("section",{className:"landing"},r.a.createElement("div",{className:"dark-overlay"},r.a.createElement("div",{className:"landing-inner"},r.a.createElement("h1",{className:"text-primary"},r.a.createElement("strong",null,"Delivery 593")),r.a.createElement("p",{className:"lead text-primary"},"Ingrese el n\xfamero de PIA"),r.a.createElement("form",{className:"form-inline my-2 my-lg-0 d-flex justify-content-center",onSubmit:function(e){return function(e){e.preventDefault()}(e)}},r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",name:"numpia",value:c,onChange:function(e){return function(e){return l(Object(O.a)(Object(O.a)({},t),{},Object(N.a)({},e.target.name,e.target.value)))}(e)},placeholder:"N\xfamero de PIA","aria-label":"Search",required:!0}),r.a.createElement(o.b,{to:"/locations/".concat(c),className:"btn btn-outline-primary my-2 my-sm-0"},"Buscar")))))},S=Object(i.b)((function(e){return{alerts:e.alert}}))((function(e){var a=e.alerts;return null!==a&&a.length>0&&a.map((function(e){return r.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.alertType," alert-dismissible fade show"),role:"alert"},e.msg)}))})),C=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{loginUser:function(e,a){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r,l,c,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{"Content-Type":"application/json"}},l=JSON.stringify({email:e,password:a}),t.prev=2,t.next=5,E.a.post("/api/auth/admin/login",l,r);case 5:c=t.sent,n({type:"LOGIN_USER_SUCCESS",payload:c.data}),n(b()),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),(o=t.t0.response.data.errors)&&o.forEach((function(e){return n(g(e.msg,"danger"))})),n({type:"LOGIN_USER_FAIL"});case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var a=e.loginUser,t=e.isAuthenticated,l=(e.role,Object(n.useState)({email:"",password:""})),c=Object(j.a)(l,2),o=c[0],i=c[1],m=o.email,u=o.password,d=function(e){i(Object(O.a)(Object(O.a)({},o),{},Object(N.a)({},e.target.name,e.target.value)))};return t?r.a.createElement(s.a,{to:"/user/dashboard"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container p-4"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("div",{className:"card bg-primary text-secondary"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",null,"Ingreso de Gerentes")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),a(m,u)}(e)},method:"POST"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",name:"email",value:m,id:"email",className:"form-control",placeholder:"Correo electr\xf3nico",onChange:function(e){return d(e)},autoFocus:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",name:"password",value:u,id:"password",className:"form-control",placeholder:"Contrase\xf1a",onChange:function(e){return d(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-outline-light btn-block",type:"submit"},"Ingresar"))))))))))})),_=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{loginDriver:function(e,a){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r,l,c,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{"Content-Type":"application/json"}},l=JSON.stringify({email:e,password:a}),t.prev=2,t.next=5,E.a.post("/api/auth/driver/login",l,r);case 5:c=t.sent,n({type:"LOGIN_DRIVER_SUCCESS",payload:c.data}),n(h()),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),(o=t.t0.response.data.errors)&&o.forEach((function(e){return n(g(e.msg,"danger"))})),n({type:"LOGIN_DRIVER_FAIL"});case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var a=e.loginDriver,t=e.isAuthenticated,l=(e.role,Object(n.useState)({email:"",password:""})),c=Object(j.a)(l,2),o=c[0],i=c[1],m=o.email,u=o.password,d=function(e){i(Object(O.a)(Object(O.a)({},o),{},Object(N.a)({},e.target.name,e.target.value)))};return t?r.a.createElement(s.a,{to:"/driver/dashboard"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container p-4"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("div",{className:"card bg-primary text-secondary"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",null,"Ingreso de Conductores")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),a(m,u)}(e)},method:"POST"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",name:"email",value:m,id:"email",className:"form-control",placeholder:"Correo electr\xf3nico",onChange:function(e){return d(e)},autoFocus:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",name:"password",value:u,id:"password",className:"form-control",placeholder:"Contrase\xf1a",onChange:function(e){return d(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-outline-light btn-block",type:"submit"},"Ingresar"))))))))))}));var I=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container p-4"},r.a.createElement("div",{class:"jumbotron bg-dark p-4"},r.a.createElement("h1",{class:"display-4 text-secondary"},"Bienvenido usuario"),r.a.createElement("p",{class:"lead text-secondary"},'Ingrese en "PIA" ',"->",' "Nueva PIA" para ingresar una nueva PIA'))))},w=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container p-4"},r.a.createElement("div",{class:"jumbotron bg-dark p-4"},r.a.createElement("h1",{class:"display-4 text-secondary"},"Bienvenido conductor"),r.a.createElement("p",{class:"lead text-secondary"},'Ingrese en "Mostrar mis entregas" para saber el n\xfamero de entregas de hoy'))))},k=t(47),R=t.n(k),L=t(58),A=t(59),D=t(60),T=t(61),P=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border",style:{width:"5rem",height:"5rem"},role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))))},U=Object(i.b)((function(e){return{search:e.search}}),{searchByPia:function(e){return function(){var a=Object(d.a)(u.a.mark((function a(t){var n;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,E.a.get("/api/pia/".concat(e));case 3:n=a.sent,t({type:"SEARCH_PIA_SUCCESS",payload:n.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),t({type:"SEARCH_PIA_FAIL",payload:{msg:a.t0.response.statusText,status:a.t0.response.status}});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var a=e.searchByPia,t=e.match,l=e.search,c=l.loading,s=l.pia;return Object(n.useEffect)((function(){a(t.params.id)}),[a,t.params.id]),r.a.createElement(n.Fragment,null,c?r.a.createElement(P,null):null===s||0===s.length?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container p-4"},r.a.createElement("div",{class:"jumbotron bg-primary p-4"},r.a.createElement("h1",{class:"display-4 text-secondary"},"N\xfamero PIA no encontrado"),r.a.createElement("p",{class:"lead text-secondary"},"Al parecer el n\xfamero PIA no existe o no ha sido ingresado en el sistema, vuelva a intentarlo m\xe1s tarde o llame al administrador"),r.a.createElement(o.b,{class:"btn btn-primary btn-lg",to:"/",role:"button"},"Buscar PIA")))):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container p-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"card card-form"},r.a.createElement("div",{className:"card-header bg-primary text-center text-secondary"},r.a.createElement("h1",null,"Detalle de su pedido")),r.a.createElement("div",{className:"card-body text-dark"},r.a.createElement("div",{className:"form-group d-flex border-bottom border-primary"},r.a.createElement("strong",null,r.a.createElement("h5",null,"Fecha de salida:"," ",r.a.createElement(R.a,{format:"DD-MM-YYYY"},s[0].fecSalida))))),r.a.createElement("div",{className:"card-body text-dark"},r.a.createElement("div",{className:"form-group d-flex border-bottom border-primary"},r.a.createElement("strong",null,r.a.createElement("h5",null,"Fecha de llegada:"," ",r.a.createElement(R.a,{format:"DD-MM-YYYY"},s[0].fecLlegada))))),r.a.createElement("div",{className:"card-body text-dark"},r.a.createElement("div",{className:"form-group d-flex border-bottom border-primary"},r.a.createElement("strong",null,r.a.createElement("h5",null,"Direcci\xf3n de llegada: ",s[0].dirLlegada)))),r.a.createElement("div",{className:"card-body text-dark"},r.a.createElement("div",{className:"form-group d-flex border-bottom border-primary"},r.a.createElement("strong",null,r.a.createElement("h5",null,"Veh\xedculo de la entrega: ",s[0].placa)))),r.a.createElement("div",{className:"card-body text-dark"},r.a.createElement("div",{className:"form-group d-flex border-bottom border-primary"},r.a.createElement("strong",null,r.a.createElement("h5",null,"Nombre conductor: ",s[0].nomCon)))),r.a.createElement("div",{className:"card-body text-dark"},r.a.createElement("div",{className:"form-group d-flex border-bottom border-primary"},r.a.createElement("strong",null,r.a.createElement("h5",null,"Estado: ",s[0].estado)))))),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement(L.a,{center:[s[0].latLlegada,s[0].lonLlegada],zoom:12},r.a.createElement(A.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(D.a,{position:[s[0].latLlegada,s[0].lonLlegada]},r.a.createElement(T.a,null,"Lugar de llegada: ",s[0].dirLlegada))))))))})),F=Object(i.b)((function(e){return{search:e.search}}),{getPiaByUser:function(){return function(){var e=Object(d.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/api/pia/user/me");case 3:t=e.sent,a({type:"GET_PIAS_BY_USER",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:"GET_PIAS_ERROR",payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}()}})((function(e){var a=e.getPiaByUser,t=e.search,l=t.pias,c=t.loading;return Object(n.useEffect)((function(){a()}),[a]),c?r.a.createElement(n.Fragment,null,"No hay nada"):r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"\xdaltimas Pias"),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped bg-light"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Pedido cliente"),r.a.createElement("th",null,"Pedido pia"),r.a.createElement("th",null,"Descripci\xf3n"),r.a.createElement("th",null,"Fecha salida"),r.a.createElement("th",null,"Fecha llegada"),r.a.createElement("th",null,"Direcci\xf3n llegada"),r.a.createElement("th",null,"Estado"),r.a.createElement("th",null,"Vehiculo"),r.a.createElement("th",null,"Conductor"),r.a.createElement("th",null,"Cliente"))),r.a.createElement("tbody",null,l.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"align-middle"},e.pedidoCliente),r.a.createElement("td",{className:"align-middle"},e.pedidoPia),r.a.createElement("td",{className:"align-middle"},e.descripcion),r.a.createElement("td",{className:"align-middle"},e.fecSalida),r.a.createElement("td",{className:"align-middle"},e.fecLlegada),r.a.createElement("td",{className:"align-middle"},e.dirLlegada),r.a.createElement("td",{className:"align-middle"},e.estado),r.a.createElement("td",{className:"align-middle"},e.placa),r.a.createElement("td",{className:"align-middle"},e.nomCon),r.a.createElement("td",{className:"align-middle"},e.nomCli))})))))})),B=t(4),G=t(48),V=function(){return function(){var e=Object(d.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/api/drivers/drivers");case 3:t=e.sent,a({type:"GET_DRIVERS_BY_USER",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:"GET_DRIVERS_FAIL",payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}()},M=function(){return function(){var e=Object(d.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/api/clients/clients");case 3:t=e.sent,a({type:"GET_CLIENTS_BY_USER",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:"GET_CLIENTS_FAIL",payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}()},Y=function(){return function(){var e=Object(d.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/api/vehicles/vehicles");case 3:t=e.sent,a({type:"GET_VEHICLES_BY_USER",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:"GET_VEHICLES_FAIL",payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}()},H=(t(119),Object(i.b)((function(e){return{driver:e.driver,client:e.client,vehicle:e.vehicle}}),{addPiaUser:function(e,a){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r,l,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={headers:{"Content-Type":"application/json"}},t.next=4,E.a.post("/api/pia/add",e,r);case 4:l=t.sent,n({type:"GET_PIA_BY_USER",payload:l.data}),n(g("Nueva PIA a\xf1adida","success")),a.push("/user/pias"),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),(c=t.t0.response.data.errors)&&c.forEach((function(e){return n(g(e.msg,"danger"))})),n({type:"GET_PIAS_ERROR",payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},getDriversByUser:V,getClientsByUser:M,getVehiclesByUser:Y})(Object(s.g)((function(e){var a=e.addPiaUser,t=e.getDriversByUser,l=e.getClientsByUser,c=e.getVehiclesByUser,o=e.driver.drivers,s=e.client.clients,i=e.vehicle.vehicles,m=e.history;Object(n.useEffect)((function(){t(),l(),c()}),[t,l,c]);var p=Object(n.useRef)(null),v=Object(n.useState)({pedidoPia:"",pedidoCliente:"",descripcion:"",fecLlegada:"",dirLlegada:"",latLlegada:"",lonLlegada:"",estado:"",vehiculoId:"",conductoreId:"",clienteId:""}),g=Object(j.a)(v,2),f=g[0],b=g[1],h=Object(n.useState)({dirLlegada:"Ambato",center:{lat:-1.24908,lng:-78.61675},position:{lat:-1.24908,lng:-78.61675},zoom:15,draggable:!0}),y=Object(j.a)(h,2),x=y[0],S=y[1],C=f.pedidoPia,_=f.pedidoCliente,I=f.descripcion,w=f.fecLlegada,k=f.dirLlegada,R=f.latLlegada,P=f.lonLlegada,U=f.estado,F=f.vehiculoId,V=f.conductoreId,M=f.clienteId,Y=function(e){return b(Object(O.a)(Object(O.a)({},f),{},Object(N.a)({},e.target.name,e.target.value)))};function H(e,a){return z.apply(this,arguments)}function z(){return(z=Object(d.a)(u.a.mark((function e(a,t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("https://us1.locationiq.com/v1/reverse.php?key=82681b92e48e69&lat=".concat(a,"&lon=").concat(t,"&format=json"));case 2:return n=e.sent,r=n.data.display_name,console.log(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(d.a)(u.a.mark((function e(){var a,t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.current,e.next=3,H(a.leafletElement.getLatLng().lat,a.leafletElement.getLatLng().lng);case 3:t=e.sent,console.log(t),console.log(a);try{S(Object(O.a)(Object(O.a)({},x),{},{dirLlegada:t,position:a.leafletElement.getLatLng()})),b(Object(O.a)(Object(O.a)({},f),{},{dirLlegada:t,latLlegada:a.leafletElement.getLatLng().lat,lonLlegada:a.leafletElement.getLatLng().lng}))}catch(n){}case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=Object(G.OpenStreetMapProvider)(),W=Object(B.d)(G.SearchControl),Z=[x.center.lat,x.center.lng],K=[x.position.lat,x.position.lng];return r.a.createElement("div",{className:"container p-4"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header bg-primary text-secondary"},r.a.createElement("h3",null,"A\xf1adir nueva P\xeda")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),a(f,m)}(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"pedidoPia",value:C,className:"form-control",placeholder:"Pedido Pia",onChange:function(e){return Y(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"pedidoCliente",value:_,className:"form-control",placeholder:"Pedido Cliente",onChange:function(e){return Y(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"descripcion",value:I,className:"form-control",placeholder:"Descripci\xf3n",onChange:function(e){return Y(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"date",className:"form-control",name:"fecLlegada",value:w,onChange:function(e){return Y(e)}})),r.a.createElement("div",{className:"form-group text-dark"},r.a.createElement(L.a,{center:Z,zoom:x.zoom,zoomControl:!0},r.a.createElement(A.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(D.a,{ref:p,draggable:x.draggable,ondragend:function(){return function(){return q.apply(this,arguments)}()},position:K},r.a.createElement(T.a,{minWidth:90},"".concat(x.position.lat," + ").concat(x.position.lng),r.a.createElement("span",{onClick:function(){S(Object(O.a)(Object(O.a)({},x),{},{draggable:!x.draggable}))}}))),r.a.createElement(W,{provider:J,showMarker:!1,showPopup:!1,popupFormat:function(e){e.query;var a,t=e.result;return a=t,console.log(a),void S(Object(O.a)(Object(O.a)({},x),{},{dirLlegada:a.label,position:{lat:a.y,lng:a.x}}))},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,autoClose:!0,searchLabel:"Ingrese una direcci\xf3n",keepResult:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"dirLlegada",value:k,className:"form-control",placeholder:"Direcci\xf3n",onChange:function(e){return Y(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"latLlegada",value:R,className:"form-control",placeholder:"Presione cualquier tecla para continuar",onChange:function(e){return Y(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"lonLlegada",value:P,className:"form-control",placeholder:"Presione cualquier tecla para continuar",onChange:function(e){return Y(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"estado",value:U,className:"form-control",placeholder:"Estado",onChange:function(e){return Y(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"clienteId",className:"form-control",value:M,onChange:function(e){return Y(e)}},r.a.createElement("option",{value:"0"},"* Seleccione un cliente"),s.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.nomCli)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"conductoreId",className:"form-control",value:V,onChange:function(e){return Y(e)}},r.a.createElement("option",{value:"0"},"* Seleccione un conductor"),o.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.nomCon)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"vehiculoId",className:"form-control",value:F,onChange:function(e){return Y(e)}},r.a.createElement("option",{value:"0"},"* Seleccione un vehiculo"),i.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.placa)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Guardar"))))))))})))),z=Object(i.b)((function(e){return{provider:e.provider}}),{getProvidersByUser:function(){return function(){var e=Object(d.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/api/providers/providers");case 3:t=e.sent,a({type:"GET_PROVIDER_BY_USER",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:"GET_PROVIDER_FAIL",payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}()}})((function(e){var a=e.getProvidersByUser,t=e.provider,l=t.providers,c=t.loading;return Object(n.useEffect)((function(){a()}),[a]),c?r.a.createElement(n.Fragment,null,"No hay nada"):r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"Proveedores"),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped bg-light"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nombre"),r.a.createElement("th",null,"Email"))),r.a.createElement("tbody",null,l.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"align-middle"},e.nomPro),r.a.createElement("td",{className:"align-middle"},e.email))})))))})),q=Object(i.b)(null,{addProviderByUser:function(e,a){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r,l,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={headers:{"Content-Type":"application/json"}},t.next=4,E.a.post("/api/providers/register",e,r);case 4:l=t.sent,n({type:"ADD_PROVIDER_SUCCESS",payload:l.data}),n(g("Nuevo proveedor a\xf1adido","success")),a.push("/user/providers"),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),(c=t.t0.response.data.errors)&&c.forEach((function(e){return n(g(e.msg,"danger"))})),n({type:"ADD_PROVIDER_FAIL",payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}})(Object(s.g)((function(e){var a=e.addProviderByUser,t=e.history,l=Object(n.useState)({nomPro:"",email:""}),c=Object(j.a)(l,2),o=c[0],s=c[1],i=o.nomPro,m=o.email,u=function(e){return s(Object(O.a)(Object(O.a)({},o),{},Object(N.a)({},e.target.name,e.target.value)))};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container p-4"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header bg-primary text-secondary"},r.a.createElement("h3",null,"Registrar nuevo proveedor")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),a(o,t)}(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"nomPro",value:i,className:"form-control",placeholder:"Nombre",onChange:function(e){return u(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"email",value:m,className:"form-control",placeholder:"Email",onChange:function(e){return u(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Registrar")))))))))}))),J=Object(i.b)((function(e){return{client:e.client}}),{getClientsByUser:M})((function(e){var a=e.getClientsByUser,t=e.client,l=t.clients,c=t.loading;return Object(n.useEffect)((function(){a()}),[a]),c?r.a.createElement(n.Fragment,null,"No hay nada"):r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"Clientes"),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped bg-light"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Cedula"),r.a.createElement("th",null,"Nombre"),r.a.createElement("th",null,"Provincia"),r.a.createElement("th",null,"Ciudad"),r.a.createElement("th",null,"Calle"),r.a.createElement("th",null,"Tel\xe9fono 1"),r.a.createElement("th",null,"Tel\xe9fono 2"),r.a.createElement("th",null,"Email"))),r.a.createElement("tbody",null,l.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"align-middle"},e.cedula),r.a.createElement("td",{className:"align-middle"},e.nomCli),r.a.createElement("td",{className:"align-middle"},e.provincia),r.a.createElement("td",{className:"align-middle"},e.ciudad),r.a.createElement("td",{className:"align-middle"},e.calle),r.a.createElement("td",{className:"align-middle"},e.telf1),r.a.createElement("td",{className:"align-middle"},e.telf2),r.a.createElement("td",{className:"align-middle"},e.email))})))))})),W=Object(i.b)(null,{addClientByUser:function(e,a){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r,l,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={headers:{"Content-Type":"application/json"}},t.next=4,E.a.post("/api/clients/register",e,r);case 4:l=t.sent,n({type:"ADD_CLIENT_SUCCESS",payload:l.data}),n(g("Nuevo cliente a\xf1adido","success")),a.push("/user/clients"),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),(c=t.t0.response.data.errors)&&c.forEach((function(e){return n(g(e.msg,"danger"))})),n({type:"ADD_CLIENT_FAIL",payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}})(Object(s.g)((function(e){var a=e.addClientByUser,t=e.history,l=Object(n.useState)({cedula:"",nomCli:"",provincia:"",ciudad:"",calle:"",telf1:"",telf2:"",email:""}),c=Object(j.a)(l,2),o=c[0],s=c[1],i=o.cedula,m=o.nomCli,u=o.provincia,d=o.ciudad,p=o.calle,E=o.telf1,v=o.telf2,g=o.email,f=function(e){return s(Object(O.a)(Object(O.a)({},o),{},Object(N.a)({},e.target.name,e.target.value)))};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container p-4"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header bg-primary text-secondary"},r.a.createElement("h3",null,"Registrar nuevo cliente")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),a(o,t)}(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"number",name:"cedula",value:i,className:"form-control",placeholder:"C\xe9dula",onChange:function(e){return f(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"nomCli",value:m,className:"form-control",placeholder:"Nombre",onChange:function(e){return f(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"provincia",value:u,className:"form-control",placeholder:"Provincia",onChange:function(e){return f(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"ciudad",value:d,className:"form-control",placeholder:"Ciudad",onChange:function(e){return f(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"calle",value:p,className:"form-control",placeholder:"Direcci\xf3n",onChange:function(e){return f(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"number",name:"telf1",value:E,className:"form-control",placeholder:"Tel\xe9fono 1",onChange:function(e){return f(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"number",name:"telf2",value:v,className:"form-control",placeholder:"Tel\xe9fono 2",onChange:function(e){return f(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",name:"email",value:g,className:"form-control",placeholder:"Email",onChange:function(e){return f(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Registrar")))))))))}))),Z=Object(i.b)((function(e){return{vehicle:e.vehicle}}),{getVehiclesByUser:Y})((function(e){var a=e.getVehiclesByUser,t=e.vehicle,l=t.vehicles,c=t.loading;return Object(n.useEffect)((function(){a()}),[a]),c?r.a.createElement(n.Fragment,null,"No hay nada"):r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"Veh\xedculos"),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped bg-light"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Placa"),r.a.createElement("th",null,"Marca"),r.a.createElement("th",null,"Tipo"))),r.a.createElement("tbody",null,l.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"align-middle"},e.placa),r.a.createElement("td",{className:"align-middle"},e.marca),r.a.createElement("td",{className:"align-middle"},e.tipo))})))))}));var K=Object(i.b)(null,{addVehicleByUser:function(e,a){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r,l,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={headers:{"Content-Type":"application/json"}},t.next=4,E.a.post("/api/vehicles/register",e,r);case 4:l=t.sent,n({type:"ADD_VEHICLE_SUCCESS",payload:l.data}),n(g("Nuevo veh\xedculo a\xf1adido","success")),a.push("/user/vehicles"),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),(c=t.t0.response.data.errors)&&c.forEach((function(e){return n(g(e.msg,"danger"))})),n({type:"ADD_VEHICLE_FAIL",payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}})(Object(s.g)((function(e){var a=e.addVehicleByUser,t=e.history,l=Object(n.useState)({placa:"",marca:"",tipo:""}),c=Object(j.a)(l,2),o=c[0],s=c[1],i=o.placa,m=o.marca,u=o.tipo,d=function(e){return s(Object(O.a)(Object(O.a)({},o),{},Object(N.a)({},e.target.name,e.target.value)))};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container p-4"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header bg-primary text-secondary"},r.a.createElement("h3",null,"Registrar nuevo veh\xedculo")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),a(o,t)}(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"placa",value:i,className:"form-control",placeholder:"Placa",onChange:function(e){return d(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"marca",value:m,className:"form-control",placeholder:"Marca",onChange:function(e){return d(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"tipo",value:u,className:"form-control",placeholder:"Tipo",onChange:function(e){return d(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Registrar")))))))))}))),Q=Object(i.b)((function(e){return{driver:e.driver}}),{getDriversByUser:V})((function(e){var a=e.getDriversByUser,t=e.driver,l=t.drivers,c=t.loading;return Object(n.useEffect)((function(){a()}),[a]),c?r.a.createElement(n.Fragment,null,"No hay nada"):r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"Conductores"),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped bg-light"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nombre"),r.a.createElement("th",null,"Email"))),r.a.createElement("tbody",null,l.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"align-middle"},e.nomCon),r.a.createElement("td",{className:"align-middle"},e.email))})))))})),X=Object(i.b)(null,{registerDriverByUser:function(e,a){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r,l,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={headers:{"Content-Type":"application/json"}},t.next=4,E.a.post("/api/drivers/register",e,r);case 4:l=t.sent,n({type:"REGISTER_DRIVER_SUCCESS",payload:l.data}),n(g("Nuevo conductor a\xf1adido","success")),a.push("/user/drivers"),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),(c=t.t0.response.data.errors)&&c.forEach((function(e){return n(g(e.msg,"danger"))})),n({type:"REGISTER_DRIVER_FAIL",payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}})(Object(s.g)((function(e){var a=e.registerDriverByUser,t=e.history,l=Object(n.useState)({nomCon:"",email:"",password:""}),c=Object(j.a)(l,2),o=c[0],s=c[1],i=o.nomCon,m=o.email,u=o.password,d=function(e){return s(Object(O.a)(Object(O.a)({},o),{},Object(N.a)({},e.target.name,e.target.value)))};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container p-4"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header bg-primary text-secondary"},r.a.createElement("h3",null,"Registrar nuevo conductor")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),a(o,t)}(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"nomCon",value:i,className:"form-control",placeholder:"Nombre",onChange:function(e){return d(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"email",value:m,className:"form-control",placeholder:"Email",onChange:function(e){return d(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",name:"password",value:u,className:"form-control",placeholder:"Contrase\xf1a",onChange:function(e){return d(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Registrar")))))))))}))),$=Object(i.b)((function(e){return{search:e.search}}),{getPiaByDriver:function(){return function(){var e=Object(d.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/api/pia/driver/me");case 3:t=e.sent,a({type:"GET_PIAS_BY_DRIVER",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:"GET_PIAS_ERROR",payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}()},updatePiaStatus:function(e,a,t){return function(){var n=Object(d.a)(u.a.mark((function n(r){var l,c,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,l={headers:{"Content-Type":"application/json"}},n.next=4,E.a.put("/api/pia/".concat(e),a,l);case 4:c=n.sent,r({type:"UPDATE_STATUS_PIA",payload:c.data}),r(g("Estado de la PIA actualizada","success")),t.push("/driver/pias"),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),(o=n.t0.response.data.errors)&&o.forEach((function(e){return r(g(e.msg,"danger"))})),r({type:"GET_PIAS_ERROR",payload:{msg:n.t0.response.statusText,status:n.t0.response.status}});case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var a=e.getPiaByDriver,t=e.updatePiaStatus,l=e.search,c=l.loading,o=l.pias,s=e.history;Object(n.useEffect)((function(){a()}),[a]);var i=Object(n.useState)({estado:""}),m=Object(j.a)(i,2),u=m[0],d=m[1],p=u.estado;return r.a.createElement(n.Fragment,null,o===[]||0===o.length||c?r.a.createElement(P,null):r.a.createElement(n.Fragment,null,r.a.createElement(L.a,{center:[o[0].latLlegada,o[0].lonLlegada],zoom:15},r.a.createElement(A.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),o.map((function(e){return r.a.createElement(D.a,{key:e.id,position:[e.latLlegada,e.lonLlegada]},r.a.createElement(T.a,{className:"custom"},r.a.createElement("form",{onSubmit:function(a){return function(e,a){e.preventDefault(),t(a,u,s),window.location.reload(!1)}(a,e.id)}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col form-group"},r.a.createElement("label",{htmlFor:"pedidoPia"},r.a.createElement("strong",null,"N\xfamero PIA:")," ",e.pedidoPia)),r.a.createElement("div",{className:"col form-group"},r.a.createElement("label",{htmlFor:"pedidoPia"},r.a.createElement("strong",null,"Pedido PIA:")," ",e.pedidoCliente))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col form-group"},r.a.createElement("label",{htmlFor:"Estado"},r.a.createElement("strong",null,"Estado:")," ",e.estado))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col form-group"},r.a.createElement("div",{className:"input-group input-group-sm mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"submit"},"Actualizar")),r.a.createElement("select",{name:"estado",className:"custom-select",value:p,onChange:function(e){return function(e){return d(Object(O.a)(Object(O.a)({},u),{},Object(N.a)({},e.target.name,e.target.value)))}(e)}},r.a.createElement("option",{key:"0",value:""},"* Escoja un nuevo estado"),r.a.createElement("option",{key:"1",value:"proceso"},"Proceso"),r.a.createElement("option",{key:"2",value:"rechazo"},"Rechazo"),r.a.createElement("option",{key:"3",value:"novedad"},"Novedad"),r.a.createElement("option",{key:"4",value:"entregado"},"Entregado"))))))))})))))})),ee=t(69),ae=Object(i.b)((function(e){return{auth:e.auth}}))((function(e){var a=e.component,t=e.auth,n=t.isAuthenticated,l=t.loading,c=Object(ee.a)(e,["component","auth"]);return r.a.createElement(s.b,Object.assign({},c,{render:function(e){return n||l?r.a.createElement(a,e):r.a.createElement(s.a,{to:"/user/login"})}}))})),te=t(24),ne=t(66),re=t(67),le=t(68),ce=[],oe={pia:null,pias:[],loading:!0,error:{}},se={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,role:localStorage.getItem("role"),user:null},ie={drivers:[],driver:null,loading:!0,error:{}},me={clients:[],client:null,loading:!0,error:{}},ue={vehicles:[],vehicle:null,loading:!0,error:{}},de={providers:[],provider:null,loading:!0,error:{}},pe=Object(te.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"SET_ALERT":return[].concat(Object(le.a)(e),[n]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==n}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"USER_LOADED":return Object(O.a)(Object(O.a)({},e),{},{isAuthenticated:!0,loading:!1,role:"user",user:n});case"DRIVER_LOADED":return Object(O.a)(Object(O.a)({},e),{},{isAuthenticated:!0,loading:!1,role:"driver",user:n});case"LOGIN_USER_SUCCESS":return localStorage.setItem("token",n.token),localStorage.setItem("role","user"),Object(O.a)(Object(O.a)(Object(O.a)({},e),n),{},{isAuthenticated:!0,role:"user",loading:!1});case"LOGIN_DRIVER_SUCCESS":return localStorage.setItem("token",n.token),localStorage.setItem("role","driver"),Object(O.a)(Object(O.a)(Object(O.a)({},e),n),{},{isAuthenticated:!0,role:"driver",loading:!1});case"LOGIN_USER_FAIL":case"LOGIN_DRIVER_FAIL":case"AUTH_ERROR":case"LOGOUT":return localStorage.removeItem("token"),localStorage.removeItem("role"),Object(O.a)(Object(O.a)({},e),{},{token:null,isAuthenticated:!1,role:"",loading:!1,user:null});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"SEARCH_PIA_SUCCESS":case"GET_PIA_BY_USER":case"UPDATE_STATUS_PIA":return Object(O.a)(Object(O.a)({},e),{},{pia:n,loading:!1});case"GET_PIAS_BY_USER":case"GET_PIAS_BY_DRIVER":return Object(O.a)(Object(O.a)({},e),{},{pias:n,loading:!1});case"SEARCH_PIA_FAIL":case"GET_PIAS_ERROR":return Object(O.a)(Object(O.a)({},e),{},{error:n,loading:!1,pia:null,pias:[]});default:return e}},driver:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"REGISTER_DRIVER_SUCCESS":return Object(O.a)(Object(O.a)({},e),{},{driver:n,loading:!1});case"GET_DRIVERS_BY_USER":return Object(O.a)(Object(O.a)({},e),{},{drivers:n,loading:!1});case"GET_DRIVERS_FAIL":case"REGISTER_DRIVER_FAIL":return Object(O.a)(Object(O.a)({},e),{},{drivers:[],driver:null,error:n,loading:!1});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"ADD_CLIENT_SUCCESS":return Object(O.a)(Object(O.a)({},e),{},{client:n,loading:!1});case"GET_CLIENTS_BY_USER":return Object(O.a)(Object(O.a)({},e),{},{clients:n,loading:!1});case"GET_CLIENTS_FAIL":case"ADD_CLIENT_FAIL":return Object(O.a)(Object(O.a)({},e),{},{clients:[],client:null,error:n,loading:!1});default:return e}},vehicle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"ADD_VEHICLE_SUCCESS":return Object(O.a)(Object(O.a)({},e),{},{vehicle:n,loading:!1});case"GET_VEHICLES_BY_USER":return Object(O.a)(Object(O.a)({},e),{},{vehicles:n,loading:!1});case"ADD_VEHICLE_FAIL":case"GET_VEHICLES_FAIL":return Object(O.a)(Object(O.a)({},e),{},{vehicles:[],vehicle:null,error:n,loading:!1});default:return e}},provider:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"ADD_PROVIDER_SUCCESS":return Object(O.a)(Object(O.a)({},e),{},{provider:n,loading:!1});case"GET_PROVIDER_BY_USER":return Object(O.a)(Object(O.a)({},e),{},{providers:n,loading:!1});case"ADD_PROVIDER_FAIL":case"GET_CLIENTS_FAIL":return Object(O.a)(Object(O.a)({},e),{},{providers:[],provider:null,error:n,loading:!1});default:return e}}}),Ee=[re.a],ve=Object(te.createStore)(pe,{},Object(ne.composeWithDevTools)(te.applyMiddleware.apply(void 0,Ee)));t(120),t(121);localStorage.token&&f(localStorage.token);var ge=function(){return Object(n.useEffect)((function(){"user"===localStorage.getItem("role")?ve.dispatch(b()):ve.dispatch(h())}),[]),r.a.createElement(i.a,{store:ve},r.a.createElement(o.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(y,null),r.a.createElement(s.b,{exact:!0,path:"/",component:x}),r.a.createElement(s.b,{exact:!0,path:"/locations/:id",component:U}),r.a.createElement("section",{className:"container"},r.a.createElement(S,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/user/login",component:C}),r.a.createElement(s.b,{exact:!0,path:"/driver/login",component:_}),r.a.createElement(ae,{exact:!0,path:"/user/dashboard",component:I}),r.a.createElement(ae,{exact:!0,path:"/driver/dashboard",component:w}),r.a.createElement(ae,{exact:!0,path:"/user/add-pia",component:H}),r.a.createElement(ae,{exact:!0,path:"/user/pias",component:F}),r.a.createElement(ae,{exact:!0,path:"/user/register-driver",component:X}),r.a.createElement(ae,{exact:!0,path:"/user/providers",component:z}),r.a.createElement(ae,{exact:!0,path:"/user/add-provider",component:q}),r.a.createElement(ae,{exact:!0,path:"/user/clients",component:J}),r.a.createElement(ae,{exact:!0,path:"/user/add-client",component:W}),r.a.createElement(ae,{exact:!0,path:"/user/drivers",component:Q}),r.a.createElement(ae,{exact:!0,path:"/user/vehicles",component:Z}),r.a.createElement(ae,{exact:!0,path:"/user/add-vehicle",component:K}),r.a.createElement(ae,{exact:!0,path:"/driver/pias",component:$}))))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ge,null)),document.getElementById("root"))},70:function(e,a,t){e.exports=t(122)}},[[70,1,2]]]);
//# sourceMappingURL=main.2ada508a.chunk.js.map